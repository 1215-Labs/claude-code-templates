{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Codex PRP Execution Result",
  "description": "Structured output from Codex after executing a PRP document",
  "type": "object",
  "properties": {
    "prp_name": {
      "type": "string",
      "description": "Name of the PRP executed (e.g., 'dangerous-command-blocker')"
    },
    "status": {
      "type": "string",
      "enum": ["success", "partial", "failed"],
      "description": "Overall execution status"
    },
    "files_created": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Absolute paths of files created"
    },
    "files_modified": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Absolute paths of files modified"
    },
    "test_results": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "test": {"type": "string", "description": "Test description"},
          "command": {"type": "string", "description": "Command executed"},
          "passed": {"type": "boolean"},
          "exit_code": {"type": "integer"},
          "output": {"type": "string", "description": "Stdout/stderr from test"}
        },
        "required": ["test", "passed"]
      },
      "description": "Results of running the PRP test plan"
    },
    "acceptance_criteria": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "criterion": {"type": "string"},
          "met": {"type": "boolean"},
          "notes": {"type": "string"}
        },
        "required": ["criterion", "met"]
      },
      "description": "Status of each acceptance criterion from the PRP"
    },
    "hooks_json_updated": {
      "type": "boolean",
      "description": "Whether .claude/hooks/hooks.json was modified"
    },
    "summary": {
      "type": "string",
      "description": "Human-readable summary of what was done"
    },
    "errors": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Any errors encountered during execution"
    }
  },
  "required": ["prp_name", "status", "files_created", "files_modified", "test_results", "acceptance_criteria", "summary"]
}
